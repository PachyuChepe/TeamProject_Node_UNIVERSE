<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quill Editor Example</title>
    <!-- Quill's CSS -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
      body {
        font-family: "Arial", sans-serif;
        padding: 200px;
        margin-top: -50px;
      }

      .form-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
      }

      #categorySelect {
        flex: 1;
        height: 50px;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 5px 10px;
        font-size: 16px;
        color: #333;
        background-color: #fff;
      }

      #postTitle {
        flex: 10;
        height: 40px;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 5px 10px;
        font-size: 16px;
        color: #333;
        background-color: #fff;
      }

      #categorySelect:hover,
      #postTitle:hover {
        border-color: #4caf50;
      }

      #categorySelect:focus,
      #postTitle:focus {
        border-color: #4caf50;
        outline: none;
      }

      #editor-container {
        margin-bottom: 20px;
      }

      #sendButton1,
      #sendButton2 {
        flex: 0.5;
        height: 52px;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }

      #sendButton:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <div class="form-group">
      <select id="categorySelect">
        <option value="1">자유 게시판</option>
        <option value="2">IT 정보</option>
        <option value="3">지식공유방</option>
        <option value="4">스터디</option>
      </select>
      <input type="text" id="postTitle" placeholder="제목을 입력하세요" />
      <!-- 데이터 전송 버튼 -->
      <button id="sendButton1" onclick="goBack()">취소</button>
      <button id="sendButton2">전송</button>
    </div>

    <!-- Quill 에디터 컨테이너 -->
    <div id="editor-container">
      <div id="editor"></div>
    </div>

    <!-- Quill's JS -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      // Quill 에디터 설정
      let quill = new Quill("#editor", {
        modules: {
          toolbar: [
            [{ header: [1, 2, false] }],
            ["bold", "italic", "underline"],
            ["image", "code-block"],
            [{ list: "ordered" }, { list: "bullet" }],
            [{ script: "sub" }, { script: "super" }],
            [{ indent: "-1" }, { indent: "+1" }],
            [{ direction: "rtl" }],
            [{ size: ["small", false, "large", "huge"] }],
            [{ color: [] }, { background: [] }],
            [{ font: [] }],
            [{ align: [] }],
            ["clean"],
          ],
        },
        placeholder: "여기에 글을 작성하세요...",
        theme: "snow",
      });

      function sendData() {
        let title = document.getElementById("postTitle").value;
        let category = document.getElementById("categorySelect").value;
        let content = quill.root.innerHTML;

        axios
          .post("http://localhost:4000/api/post", {
            categoryName: category,
            title: title,
            content: content,
          })
          .then(function (response) {
            // 성공적인 응답 처리
            alert(response.data.message);
          })
          .catch(function (error) {
            // 오류 처리
            // 오류 응답이 존재하면 그 메시지를 사용하고, 그렇지 않으면 기본 오류 메시지를 표시합니다.
            let errorMessage = error.response && error.response.data ? error.response.data.message : "알 수 없는 오류가 발생했습니다.";
            alert(errorMessage);
          });
      }

      document.getElementById("sendButton2").addEventListener("click", sendData);

      function goBack() {
        window.location.href = "index.html";
      }
    </script>
  </body>
</html>
