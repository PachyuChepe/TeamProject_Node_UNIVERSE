<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile Settings</title>
    <style>
      /* Basic Styles */
      body {
        background-color: #f5f5f5;
        color: #333333;
        font-family: "Noto Sans", sans-serif;
      }

      /* Container */
      .container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* Profile Card */
      .profile-card {
        width: 100%;
        max-width: 800px;
        background-color: white;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border: 1px solid #e1e1e1;
      }

      /* Flexbox Utilities */
      .flex {
        display: flex;
      }

      .flex-col {
        flex-direction: column;
      }

      .flex-row {
        flex-direction: row;
      }

      .items-center {
        align-items: center;
      }

      /* Profile Image */
      .profile-image {
        width: 192px;
        height: 192px;
        background-color: #d1d1d1;
        border-radius: 50%;
        margin-bottom: 20px;
        background-size: cover; /* 이미지가 영역을 꽉 채우도록 함 */
        background-position: center; /* 이미지가 중앙에 위치하도록 함 */
      }

      /* Buttons */
      .button {
        background-color: #4dabf7;
        color: white;
        padding: 10px 20px;
        border-radius: 4px;
        text-align: center;
        cursor: pointer;
        text-decoration: none;
        font-weight: bold;
        border: none;
      }

      .button:hover {
        background-color: #1f8ce6;
      }

      /* Input Styles */
      .input {
        border: 1px solid #e1e1e1;
        border-radius: 4px;
        padding: 10px 16px;
        width: 100%;
        max-width: 400px;
        height: 20px;
        margin-bottom: 16px;
        font-size: 14px;
      }

      /* Labels */
      .label {
        font-weight: bold;
        margin-bottom: 8px;
        display: block;
        color: #666666;
      }

      /* Sidebar and Main Content */
      .sidebar {
        justify-content: center;
        margin-bottom: 16px;
      }

      .main-content {
        margin-bottom: 16px;
      }

      @media (min-width: 768px) {
        .sidebar {
          width: 33.33333%;
        }
        .main-content {
          margin-left: 50px;
          flex: 1;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="profile-card">
        <div class="flex flex-row">
          <!-- Profile Image and Upload Button Section -->
          <div class="sidebar flex flex-col items-center">
            <div class="profile-image" id="profileImagePreview"></div>
            <!-- Image Upload Input -->
            <input type="file" id="imageUpload" accept="image/*" style="display: none" />
            <button class="button" onclick="document.getElementById('imageUpload').click()">Upload New Picture</button>
          </div>

          <!-- Information Input Section -->
          <div class="main-content">
            <form>
              <!-- Name Input -->
              <div>
                <label for="name" class="label">Name</label>
                <input type="text" id="name" class="input" />
              </div>

              <!-- Email Input -->
              <div>
                <label for="email" class="label">Email</label>
                <input type="email" id="email" class="input" />
              </div>

              <!-- Current Password Input -->
              <div>
                <label for="currentPassword" class="label">Current Password</label>
                <input type="password" id="currentPassword" class="input" />
              </div>

              <!-- New Password Input -->
              <div>
                <label for="newPassword" class="label">New Password</label>
                <input type="password" id="newPassword" class="input" />
              </div>

              <!-- Submit Button -->
              <button class="button" type="submit">Save Changes</button>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script>
      // 이미지 업로드 및 미리보기 로직
      var uploadedImageFile; // 업로드된 이미지 파일 저장 변수

      document.getElementById("imageUpload").addEventListener("change", function () {
        if (this.files && this.files[0]) {
          const reader = new FileReader();
          reader.addEventListener("load", () => {
            const uploadedImage = reader.result;
            document.getElementById("profileImagePreview").style.backgroundImage = `url(${uploadedImage})`;
            uploadedImageFile = this.files[0]; // 이미지 파일 저장
          });
          reader.readAsDataURL(this.files[0]);
        }
      });

      // 폼 제출 로직
      document.querySelector(".profile-card form").addEventListener("submit", function (event) {
        event.preventDefault(); // 기본 제출 이벤트 방지

        // FormData 객체 생성
        var formData = new FormData();
        formData.append("image", uploadedImageFile); // 이미지 추가
        formData.append("name", document.getElementById("name").value);
        formData.append("email", document.getElementById("email").value);
        formData.append("currentPassword", document.getElementById("currentPassword").value);
        formData.append("newPassword", document.getElementById("newPassword").value);

        // FormData 내용 콘솔에 출력 (디버깅용)
        for (var pair of formData.entries()) {
          console.log(pair[0] + ": ", pair[1]);
          // 파일 상세 정보 출력
          if (pair[1] instanceof File) {
            console.log("File Details:");
            console.log("Name: " + pair[1].name);
            console.log("Size: " + pair[1].size);
            console.log("Type: " + pair[1].type);
          }
        }

        // 서버로 전송
        // axios.post('서버 URL', formData, {
        //   headers: {
        //     'Content-Type': 'multipart/form-data'
        //   }
        // })
        // .then(response => /* 성공 처리 */)
        // .catch(error => /* 오류 처리 */);
      });
    </script>
  </body>
</html>
